<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Contextual Navigation</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link type="text/css" rel="stylesheet" href="cnstyle.css">
        <!-- include jQuery library -->
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <!-- include Cycle plugin -->
        <script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script>
        <script type="text/javascript">

            var CampusLocation = function () {
                var currentState = new Beginning(this);
                this.change = function (state) {
                    currentState = state;
                    document.getElementById("arrow").onclick = function fun() {
                        currentState.go();
                    }
                    document.getElementById("goback").onclick = function fun() {
                        currentState.back();
                    }
                    document.getElementById("backtostart").onclick = function fun() {
                        currentState.beginning();
                    }
                };
                this.start = function () {
                    currentState.go();
                };
            }

            var Beginning = function (location) {
                this.location = location;
                this.go = function () {
                    changePhoto("<img src='imgs/taylor.jpg' />");
                    location.change(new Taylor(location));
                }
                this.back = function () {
                    //beginning so nothing     
                }

                this.beginning = function () {
                    //beginning so nothing
                }
            };
            var Taylor = function (location) {
                this.location = location;
                this.go = function () {
                    changePhoto("<img src='imgs/Hurst.jpg' />");
                    location.change(new Hurst(location));
                }

                this.back = function () {
                    changePhoto("<img src='imgs/mountain_man.jpg' />");
                    location.change(new Beginning(location));
                }

                this.beginning = function () {
                    backToStart(location);
                }
            };
            var Hurst = function (location) {
                this.location = location;
                this.go = function () {
                    changePhoto("<img src='imgs/kelley.jpg' />");
                    location.change(new Kelley(location));
                }
                this.back = function () {
                    changePhoto("<img src='imgs/taylor.jpg' />");
                    location.change(new Taylor(location));
                }

                this.beginning = function () {
                    backToStart(location);
                }
            };

            var Kelley = function (location) {
                this.location = location;
                this.go = function () {
                    alert("You have reached the end of the current tour")
                }
                this.back = function () {
                    changePhoto("<img src='imgs/Hurst.jpg' />");
                    location.change(new Hurst(location));
                }

                this.beginning = function () {
                    backToStart(location);
                }
            };
            
            var backToStart = function (location) {
                changePhoto("<img src='imgs/mountain_man.jpg' />");
                location.change(new Beginning(location));
            }

            var changePhoto = function (str) {
                var div = $('#tour_images');
                div.html(str);
            }
            
            function run() {
                var location = new CampusLocation();
                location.start();
            }

            window.onload = function () {
                document.getElementById("arrow").onclick = function fun() {
                    run();
                }
            }
            /*
             * This code from the Cycle plugin may be useful for transitioning between images
             * 
             * $('#tour_images').cycle({
             fx: 'fade',
             speed: 'slow',
             timeout: 0,
             next: '#connectionRight_img',
             prev: '#prev2'<!-- TODO: Add prev arrow -->
             });*/
        </script>
    </head>
    <body>
        <div>
            <div id ="arrow">
                <img id="connectionRight_img" class="wt_arrow btn" src="imgs/trailEnd_turnRight.png" alt="Right Arrow"/>
            </div>
            <div id="backtostart">
                <button>Go Back to Beginning</button>
            </div>
            <div id="goback">
                <button>Go Back</button>
            </div>
            <div id="tour_images">
                <img src="imgs/mountain_man.jpg" />
            </div>
            <!-- <div id="tour_images" class="pics">
                <img src="imgs/mountain_man.jpg" />
                <img src="imgs/taylor.jpg" />
            </div> -->
        </div>


    </body>
</html>
